!function(blocks,editor,element){function text_toolbar(e){var t=wp.element.useState,o=t(!1),l=o[0],n=o[1],c=t(!1),a=c[0],i=c[1],r=t(""),s=r[0],d=r[1];return el(wp.blockEditor.BlockControls,{},layout_toolbar(),el(wp.components.ToolbarGroup,{},el(wp.components.ToolbarButton,{className:"fca-ept-icon-button",icon:"info",label:"Add icon",isPressed:l,onClick:function(){n(!0),window.setTimeout(function(){var e=document.querySelectorAll(".fca-ept-fa-icons label");e.length&&e[0].click()},50)}}),l?el(wp.components.Modal,{isDismissible:!1,shouldCloseOnClickOutside:!0,title:"Add icon",className:"fca-ept-fa-icons-modal",onRequestClose:function(){n(!1)}},el(wp.components.ComboboxControl,{label:"Add Icon",className:"fca-ept-fa-icons",value:"",allowReset:!1,options:fcaEpt4ToolbarData.fa_classes,onChange:function(t){var o="<span style='font-family:FontAwesome'>"+t+"</span>";e.onChange(wp.richText.insert(e.value,wp.richText.create({html:o}))),n(!1)}})):null,el(wp.components.ToolbarButton,{className:"fca-ept-tooltip-button",icon:"editor-help",label:"Add Tooltip",isPressed:!!tooltipContents(e),onClick:function(){tooltipContents(e)&&d(tooltipContents(e)),i(!0)}}),a?el(wp.components.Modal,{isDismissible:!1,shouldCloseOnClickOutside:!0,title:"Add a tooltip",className:"fca-ept-fa-icons-modal",onRequestClose:function(){i(!1)}},el(wp.components.TextareaControl,{value:s,label:"Tooltip Text",onChange:function(e){d(e)}}),el(wp.components.Button,{variant:"primary",onClick:function(){var t="<span class='fca-ept-tooltip' data-tooltip='"+s+"' style='font-family:FontAwesome'>&#xf059;</span>";tooltipContents(e)?e.onChange(wp.richText.insert(e.value,wp.richText.create({html:t}),e.value.start,e.value.end)):e.onChange(wp.richText.insert(e.value,wp.richText.create({html:t}),e.value.end)),i(!1)}},"Add")):null))}function tooltipContents(e){if(0==e.value.hasOwnProperty("activeFormats"))return!1;var t=e.value.activeFormats.filter(function(e){return e.unregisteredAttributes&&e.unregisteredAttributes.class&&"fca-ept-tooltip"===e.unregisteredAttributes.class});return 0!=t.length&&t[0].unregisteredAttributes["data-tooltip"]}function layout_toolbar(){var e=wp.data.select("core/block-editor").getBlockParentsByBlockName(selectedBlock.clientId,["easy-pricing-tables/table"]),t=wp.data.select("core/block-editor").getBlockParentsByBlockName(selectedBlock.clientId,["easy-pricing-tables/list"]),o=[{icon:"table-row-before",title:"Insert row before",onClick:function(){add_row(selectedBlock,e[0])}},{icon:"table-row-after",title:"Insert row after",onClick:function(){add_row(selectedBlock,e[0],!0)}},{icon:"table-col-before",title:"Insert column before",onClick:function(){add_column(selectedBlock,e[0])}},{icon:"table-col-after",title:"Insert column after",onClick:function(){add_column(selectedBlock,e[0],!0)}},{icon:"table-col-delete",title:"Delete column",onClick:function(){delete_column(selectedBlock,e[0])}}],l=[{icon:"table-row-before",title:"Insert row before",onClick:function(){add_row(selectedBlock,e[0])}},{icon:"table-row-after",title:"Insert row after",onClick:function(){add_row(selectedBlock,e[0],!0)}},{icon:"table-row-delete",title:"Delete row",onClick:function(){delete_row(selectedBlock,e[0])}},{icon:"table-col-before",title:"Insert column before",onClick:function(){add_column(selectedBlock,e[0])}},{icon:"table-col-after",title:"Insert column after",onClick:function(){add_column(selectedBlock,e[0],!0)}},{icon:"table-col-delete",title:"Delete column",onClick:function(){delete_column(selectedBlock,e[0])}}];return el(wp.components.ToolbarGroup,{},el(wp.components.ToolbarDropdownMenu,{label:"Edit table",icon:"editor-table",controls:0==t.length?o:l}))}function add_column(e,t,o){var l=wp.data.select("core/block-editor").getBlock(t);void 0===o&&(o=!1);var n=wp.blocks.createBlock("easy-pricing-tables/column",defaultBlockProps(l.attributes.templateID));o?wp.data.dispatch("core/block-editor").insertBlocks(n,l.innerBlocks.length,t):wp.data.dispatch("core/block-editor").insertBlocks(n,0,t)}function add_row(e,t,o){var l=wp.data.select("core/block-editor").getBlock(t);void 0===o&&(o=!1);for(var n=0;n<l.innerBlocks.length;n++){var c=wp.blocks.createBlock("easy-pricing-tables/list-item",{}),a=l.innerBlocks[n].innerBlocks.filter(function(e){return"easy-pricing-tables/list"===e.name})[0],i=o?a.length:0;wp.data.dispatch("core/block-editor").insertBlocks(c,i,a.clientId)}}function delete_row(e,t){for(var o=wp.data.select("core/block-editor").getBlock(t),l=wp.data.select("core/block-editor").getBlockIndex(e.clientId),n=[],c=0;c<o.innerBlocks.length;c++){var a=o.innerBlocks[c].innerBlocks.filter(function(e){return"easy-pricing-tables/list"===e.name})[0].innerBlocks[l];n.push(a.clientId)}wp.data.dispatch("core/block-editor").removeBlocks(n)}function delete_column(e,t){var o=wp.data.select("core/block-editor").getBlockParentsByBlockName(e.clientId,["easy-pricing-tables/column"]);wp.data.dispatch("core/block-editor").removeBlock(o[0])}function defaultBlockProps(templateID){return eval("fcaEpt4defaultBlockProps"+templateID)}var el=React.createElement,selectedBlock={},fcaEpt4Toolbar=wp.richText.registerFormatType("easy-pricing-tables/toolbar",{title:"Toolbar",tagName:"i",className:"ept4-icon",edit:function(e){return selectedBlock=wp.data.useSelect(function(e){return e("core/block-editor").getSelectedBlock()}),-1!==["easy-pricing-tables/field","easy-pricing-tables/list-item"].indexOf(selectedBlock.name)?text_toolbar(e):null}})}(window.wp.blocks,window.wp.editor,window.wp.element);